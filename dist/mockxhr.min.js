/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;
/******/
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports, __webpack_require__) {

	"use strict";
	
	var _index = __webpack_require__(1);
	
	var _index2 = _interopRequireDefault(_index);
	
	function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
	
	window.mockxhr = _index2.default;

/***/ },
/* 1 */
/***/ function(module, exports) {

	"use strict";
	var __Promise = (function () {
	    function __Promise(executor) {
	    }
	    return __Promise;
	}());
	var _Promise = Promise || __Promise;
	var mockxhr;
	(function (mockxhr) {
	    var MockXHR = (function () {
	        function MockXHR(handler, status) {
	            this.handler = handler;
	            this.status = status;
	        }
	        return MockXHR;
	    }());
	    var METHODS = [
	        "COPY",
	        "DELETE",
	        "GET",
	        "HEAD",
	        "OPTIONS",
	        "PATCH",
	        "POST",
	        "PUT",
	    ];
	    var _headers;
	    var _mock = false;
	    var _requests = {};
	    var _success;
	    var _failure;
	    METHODS.forEach(function (method) { return _requests[method] = {}; });
	    function cloneJSON(json) {
	        if (!json)
	            return null;
	        return JSON.parse(JSON.stringify(json));
	    }
	    function setMock(flag) {
	        _mock = flag;
	    }
	    mockxhr.setMock = setMock;
	    function setHeaders(headers) {
	        _headers = headers;
	    }
	    mockxhr.setHeaders = setHeaders;
	    function ajaxSuccess(handler) {
	        _success = handler;
	    }
	    mockxhr.ajaxSuccess = ajaxSuccess;
	    function ajaxFailure(handler) {
	        _failure = handler;
	    }
	    mockxhr.ajaxFailure = ajaxFailure;
	    function mock(method, url, handler, status) {
	        _requests[method][url] = new MockXHR(handler || (function () { return ""; }), status || 200);
	    }
	    mockxhr.mock = mock;
	    function COPY(url, json, done, fail) {
	        return new _Promise(function (resolve, reject) {
	            _xhr(resolve, reject, "COPY", url, json, done, fail);
	        });
	    }
	    mockxhr.COPY = COPY;
	    function DELETE(url, json, done, fail) {
	        return new _Promise(function (resolve, reject) {
	            _xhr(resolve, reject, "DELETE", url, json, done, fail);
	        });
	    }
	    mockxhr.DELETE = DELETE;
	    function GET(url, json, done, fail) {
	        return new _Promise(function (resolve, reject) {
	            _xhr(resolve, reject, "GET", url, json, done, fail);
	        });
	    }
	    mockxhr.GET = GET;
	    function HEAD(url, json, done, fail) {
	        return new _Promise(function (resolve, reject) {
	            _xhr(resolve, reject, "HEAD", url, json, done, fail);
	        });
	    }
	    mockxhr.HEAD = HEAD;
	    function OPTIONS(url, json, done, fail) {
	        return new _Promise(function (resolve, reject) {
	            _xhr(resolve, reject, "OPTIONS", url, json, done, fail);
	        });
	    }
	    mockxhr.OPTIONS = OPTIONS;
	    function PATCH(url, json, done, fail) {
	        return new _Promise(function (resolve, reject) {
	            _xhr(resolve, reject, "PATCH", url, json, done, fail);
	        });
	    }
	    mockxhr.PATCH = PATCH;
	    function POST(url, json, done, fail) {
	        return new _Promise(function (resolve, reject) {
	            _xhr(resolve, reject, "POST", url, json, done, fail);
	        });
	    }
	    mockxhr.POST = POST;
	    function PUT(url, json, done, fail) {
	        return new _Promise(function (resolve, reject) {
	            _xhr(resolve, reject, "PUT", url, json, done, fail);
	        });
	    }
	    mockxhr.PUT = PUT;
	    function _xhr(resolve, reject, method, url, json, done, fail) {
	        if (_mock) {
	            var matched = url;
	            if (!_requests[method][url]) {
	                matched = "";
	                for (var r in _requests[method]) {
	                    if (url.search(r) === 0) {
	                        matched = r;
	                        break;
	                    }
	                }
	            }
	            if (matched) {
	                var status_1 = _requests[method][matched].status;
	                var handler = _requests[method][matched].handler;
	                var response_1 = handler(cloneJSON(json));
	                setTimeout(function () {
	                    if (status_1 >= 200 && status_1 < 300 || status_1 === 304) {
	                        resolve(response_1);
	                        if (done)
	                            done(response_1);
	                    }
	                    else {
	                        reject({ status: status_1 });
	                        if (fail)
	                            fail({ status: status_1 });
	                    }
	                }, 100);
	            }
	            else {
	                reject({ status: 404, statusText: "Not Found" });
	            }
	        }
	        else {
	            var xhr_1 = new XMLHttpRequest();
	            xhr_1.onreadystatechange = function () {
	                if (xhr_1.readyState === 4) {
	                    var status_2 = xhr_1.status;
	                    if (status_2 >= 200 && status_2 < 300 || status_2 === 304) {
	                        var response = void 0;
	                        try {
	                            response = JSON.parse(xhr_1.responseText);
	                        }
	                        catch (e) {
	                            response = xhr_1.responseText;
	                        }
	                        resolve(response);
	                        if (_success) {
	                            _success(response, done, fail);
	                        }
	                        else if (done) {
	                            done(response);
	                        }
	                    }
	                    else {
	                        reject(xhr_1);
	                        if (_failure) {
	                            _failure(xhr_1, fail, done);
	                        }
	                        else if (fail) {
	                            fail(xhr_1);
	                        }
	                    }
	                }
	            };
	            xhr_1.open(method, url, true);
	            xhr_1.setRequestHeader("Content-Type", "application/json; charset=utf-8");
	            Object.keys(_headers || {}).forEach(function (k) { return xhr_1.setRequestHeader(k, _headers[k]); });
	            xhr_1.send(json ? JSON.stringify(json) : "");
	        }
	    }
	})(mockxhr || (mockxhr = {}));
	Object.defineProperty(exports, "__esModule", { value: true });
	exports.default = mockxhr;


/***/ }
/******/ ]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgNjE4ZTcwY2FhYTRiYzI5N2MwZTciLCJ3ZWJwYWNrOi8vLy4vanMvZW50cmllcy9tb2NreGhyLmpzIiwid2VicGFjazovLy8uL2pzL2luZGV4LnRzIl0sIm5hbWVzIjpbIndpbmRvdyIsIm1vY2t4aHIiXSwibWFwcGluZ3MiOiI7QUFBQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx1QkFBZTtBQUNmO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOzs7Ozs7Ozs7QUN0Q0E7Ozs7OztBQUNBQSxRQUFPQyxPQUFQLG1COzs7Ozs7QUNEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBdUMsK0JBQStCLEVBQUU7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1RUFBc0UsV0FBVyxFQUFFO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFnQyxtQkFBbUI7QUFDbkQ7QUFDQSxtQ0FBa0MsbUJBQW1CO0FBQ3JEO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQSx5QkFBd0IsdUNBQXVDO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzRUFBcUU7QUFDckUsdUNBQXNDLHdCQUF3QiwrQ0FBK0MsRUFBRTtBQUMvRztBQUNBO0FBQ0E7QUFDQSxFQUFDLDBCQUEwQjtBQUMzQiwrQ0FBOEMsY0FBYztBQUM1RCIsImZpbGUiOiJtb2NreGhyLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRleHBvcnRzOiB7fSxcbiBcdFx0XHRpZDogbW9kdWxlSWQsXG4gXHRcdFx0bG9hZGVkOiBmYWxzZVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIDYxOGU3MGNhYWE0YmMyOTdjMGU3IiwiaW1wb3J0IG1vY2t4aHIgZnJvbSBcIi4uL2luZGV4XCJcbndpbmRvdy5tb2NreGhyID0gbW9ja3hoclxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL2VudHJpZXMvbW9ja3hoci5qcyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fUHJvbWlzZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gX19Qcm9taXNlKGV4ZWN1dG9yKSB7XG4gICAgfVxuICAgIHJldHVybiBfX1Byb21pc2U7XG59KCkpO1xudmFyIF9Qcm9taXNlID0gUHJvbWlzZSB8fCBfX1Byb21pc2U7XG52YXIgbW9ja3hocjtcbihmdW5jdGlvbiAobW9ja3hocikge1xuICAgIHZhciBNb2NrWEhSID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gTW9ja1hIUihoYW5kbGVyLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlciA9IGhhbmRsZXI7XG4gICAgICAgICAgICB0aGlzLnN0YXR1cyA9IHN0YXR1cztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTW9ja1hIUjtcbiAgICB9KCkpO1xuICAgIHZhciBNRVRIT0RTID0gW1xuICAgICAgICBcIkNPUFlcIixcbiAgICAgICAgXCJERUxFVEVcIixcbiAgICAgICAgXCJHRVRcIixcbiAgICAgICAgXCJIRUFEXCIsXG4gICAgICAgIFwiT1BUSU9OU1wiLFxuICAgICAgICBcIlBBVENIXCIsXG4gICAgICAgIFwiUE9TVFwiLFxuICAgICAgICBcIlBVVFwiLFxuICAgIF07XG4gICAgdmFyIF9oZWFkZXJzO1xuICAgIHZhciBfbW9jayA9IGZhbHNlO1xuICAgIHZhciBfcmVxdWVzdHMgPSB7fTtcbiAgICB2YXIgX3N1Y2Nlc3M7XG4gICAgdmFyIF9mYWlsdXJlO1xuICAgIE1FVEhPRFMuZm9yRWFjaChmdW5jdGlvbiAobWV0aG9kKSB7IHJldHVybiBfcmVxdWVzdHNbbWV0aG9kXSA9IHt9OyB9KTtcbiAgICBmdW5jdGlvbiBjbG9uZUpTT04oanNvbikge1xuICAgICAgICBpZiAoIWpzb24pXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoanNvbikpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBzZXRNb2NrKGZsYWcpIHtcbiAgICAgICAgX21vY2sgPSBmbGFnO1xuICAgIH1cbiAgICBtb2NreGhyLnNldE1vY2sgPSBzZXRNb2NrO1xuICAgIGZ1bmN0aW9uIHNldEhlYWRlcnMoaGVhZGVycykge1xuICAgICAgICBfaGVhZGVycyA9IGhlYWRlcnM7XG4gICAgfVxuICAgIG1vY2t4aHIuc2V0SGVhZGVycyA9IHNldEhlYWRlcnM7XG4gICAgZnVuY3Rpb24gYWpheFN1Y2Nlc3MoaGFuZGxlcikge1xuICAgICAgICBfc3VjY2VzcyA9IGhhbmRsZXI7XG4gICAgfVxuICAgIG1vY2t4aHIuYWpheFN1Y2Nlc3MgPSBhamF4U3VjY2VzcztcbiAgICBmdW5jdGlvbiBhamF4RmFpbHVyZShoYW5kbGVyKSB7XG4gICAgICAgIF9mYWlsdXJlID0gaGFuZGxlcjtcbiAgICB9XG4gICAgbW9ja3hoci5hamF4RmFpbHVyZSA9IGFqYXhGYWlsdXJlO1xuICAgIGZ1bmN0aW9uIG1vY2sobWV0aG9kLCB1cmwsIGhhbmRsZXIsIHN0YXR1cykge1xuICAgICAgICBfcmVxdWVzdHNbbWV0aG9kXVt1cmxdID0gbmV3IE1vY2tYSFIoaGFuZGxlciB8fCAoZnVuY3Rpb24gKCkgeyByZXR1cm4gXCJcIjsgfSksIHN0YXR1cyB8fCAyMDApO1xuICAgIH1cbiAgICBtb2NreGhyLm1vY2sgPSBtb2NrO1xuICAgIGZ1bmN0aW9uIENPUFkodXJsLCBqc29uLCBkb25lLCBmYWlsKSB7XG4gICAgICAgIHJldHVybiBuZXcgX1Byb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgX3hocihyZXNvbHZlLCByZWplY3QsIFwiQ09QWVwiLCB1cmwsIGpzb24sIGRvbmUsIGZhaWwpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgbW9ja3hoci5DT1BZID0gQ09QWTtcbiAgICBmdW5jdGlvbiBERUxFVEUodXJsLCBqc29uLCBkb25lLCBmYWlsKSB7XG4gICAgICAgIHJldHVybiBuZXcgX1Byb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgX3hocihyZXNvbHZlLCByZWplY3QsIFwiREVMRVRFXCIsIHVybCwganNvbiwgZG9uZSwgZmFpbCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtb2NreGhyLkRFTEVURSA9IERFTEVURTtcbiAgICBmdW5jdGlvbiBHRVQodXJsLCBqc29uLCBkb25lLCBmYWlsKSB7XG4gICAgICAgIHJldHVybiBuZXcgX1Byb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgX3hocihyZXNvbHZlLCByZWplY3QsIFwiR0VUXCIsIHVybCwganNvbiwgZG9uZSwgZmFpbCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtb2NreGhyLkdFVCA9IEdFVDtcbiAgICBmdW5jdGlvbiBIRUFEKHVybCwganNvbiwgZG9uZSwgZmFpbCkge1xuICAgICAgICByZXR1cm4gbmV3IF9Qcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIF94aHIocmVzb2x2ZSwgcmVqZWN0LCBcIkhFQURcIiwgdXJsLCBqc29uLCBkb25lLCBmYWlsKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG1vY2t4aHIuSEVBRCA9IEhFQUQ7XG4gICAgZnVuY3Rpb24gT1BUSU9OUyh1cmwsIGpzb24sIGRvbmUsIGZhaWwpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBfUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICBfeGhyKHJlc29sdmUsIHJlamVjdCwgXCJPUFRJT05TXCIsIHVybCwganNvbiwgZG9uZSwgZmFpbCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtb2NreGhyLk9QVElPTlMgPSBPUFRJT05TO1xuICAgIGZ1bmN0aW9uIFBBVENIKHVybCwganNvbiwgZG9uZSwgZmFpbCkge1xuICAgICAgICByZXR1cm4gbmV3IF9Qcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIF94aHIocmVzb2x2ZSwgcmVqZWN0LCBcIlBBVENIXCIsIHVybCwganNvbiwgZG9uZSwgZmFpbCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtb2NreGhyLlBBVENIID0gUEFUQ0g7XG4gICAgZnVuY3Rpb24gUE9TVCh1cmwsIGpzb24sIGRvbmUsIGZhaWwpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBfUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICBfeGhyKHJlc29sdmUsIHJlamVjdCwgXCJQT1NUXCIsIHVybCwganNvbiwgZG9uZSwgZmFpbCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtb2NreGhyLlBPU1QgPSBQT1NUO1xuICAgIGZ1bmN0aW9uIFBVVCh1cmwsIGpzb24sIGRvbmUsIGZhaWwpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBfUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICBfeGhyKHJlc29sdmUsIHJlamVjdCwgXCJQVVRcIiwgdXJsLCBqc29uLCBkb25lLCBmYWlsKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG1vY2t4aHIuUFVUID0gUFVUO1xuICAgIGZ1bmN0aW9uIF94aHIocmVzb2x2ZSwgcmVqZWN0LCBtZXRob2QsIHVybCwganNvbiwgZG9uZSwgZmFpbCkge1xuICAgICAgICBpZiAoX21vY2spIHtcbiAgICAgICAgICAgIHZhciBtYXRjaGVkID0gdXJsO1xuICAgICAgICAgICAgaWYgKCFfcmVxdWVzdHNbbWV0aG9kXVt1cmxdKSB7XG4gICAgICAgICAgICAgICAgbWF0Y2hlZCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgciBpbiBfcmVxdWVzdHNbbWV0aG9kXSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodXJsLnNlYXJjaChyKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hlZCA9IHI7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtYXRjaGVkKSB7XG4gICAgICAgICAgICAgICAgdmFyIHN0YXR1c18xID0gX3JlcXVlc3RzW21ldGhvZF1bbWF0Y2hlZF0uc3RhdHVzO1xuICAgICAgICAgICAgICAgIHZhciBoYW5kbGVyID0gX3JlcXVlc3RzW21ldGhvZF1bbWF0Y2hlZF0uaGFuZGxlcjtcbiAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2VfMSA9IGhhbmRsZXIoY2xvbmVKU09OKGpzb24pKTtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXR1c18xID49IDIwMCAmJiBzdGF0dXNfMSA8IDMwMCB8fCBzdGF0dXNfMSA9PT0gMzA0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlXzEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRvbmUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9uZShyZXNwb25zZV8xKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCh7IHN0YXR1czogc3RhdHVzXzEgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmFpbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWlsKHsgc3RhdHVzOiBzdGF0dXNfMSB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZWplY3QoeyBzdGF0dXM6IDQwNCwgc3RhdHVzVGV4dDogXCJOb3QgRm91bmRcIiB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciB4aHJfMSA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICAgICAgeGhyXzEub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmICh4aHJfMS5yZWFkeVN0YXRlID09PSA0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzdGF0dXNfMiA9IHhocl8xLnN0YXR1cztcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXR1c18yID49IDIwMCAmJiBzdGF0dXNfMiA8IDMwMCB8fCBzdGF0dXNfMiA9PT0gMzA0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gSlNPTi5wYXJzZSh4aHJfMS5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IHhocl8xLnJlc3BvbnNlVGV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9zdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3N1Y2Nlc3MocmVzcG9uc2UsIGRvbmUsIGZhaWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZG9uZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvbmUocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHhocl8xKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfZmFpbHVyZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9mYWlsdXJlKHhocl8xLCBmYWlsLCBkb25lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGZhaWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWlsKHhocl8xKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB4aHJfMS5vcGVuKG1ldGhvZCwgdXJsLCB0cnVlKTtcbiAgICAgICAgICAgIHhocl8xLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04XCIpO1xuICAgICAgICAgICAgT2JqZWN0LmtleXMoX2hlYWRlcnMgfHwge30pLmZvckVhY2goZnVuY3Rpb24gKGspIHsgcmV0dXJuIHhocl8xLnNldFJlcXVlc3RIZWFkZXIoaywgX2hlYWRlcnNba10pOyB9KTtcbiAgICAgICAgICAgIHhocl8xLnNlbmQoanNvbiA/IEpTT04uc3RyaW5naWZ5KGpzb24pIDogXCJcIik7XG4gICAgICAgIH1cbiAgICB9XG59KShtb2NreGhyIHx8IChtb2NreGhyID0ge30pKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZGVmYXVsdCA9IG1vY2t4aHI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2pzL2luZGV4LnRzXG4vLyBtb2R1bGUgaWQgPSAxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=